%\lstset{language=erlang}
%\begin{figure}[h!]
\begin{verbatim}
-module(consumer).
-export([start/1]).
-record(environment, {
    received_data
  }).

start(Received_data) ->
  Env = #environment{received_data = Received_data},
  receive_data(Env).

receive_data(Env) ->
  receive
    Data ->
      NewEnv = Env#environment
      {received_data = Data},
      consume_data(NewEnv)
  end.

consume_data(Env) ->
  Data = Env#environment.received_data,
  receive_data(Env).
\end{verbatim}
%\end{figure}
