%\lstset{language=erlang}
\begin{figure}[h!]
\begin{lstlisting}[style=erlangcode, caption=The Erlang module \code{shared}, label=fig:shared]
- module(shared).
- export([start/1]).

start(Init_value) -> 
  handle_request(Init_value).

handle_request(Value) -> 
  receive 
    {get, Id} -> 
      Id ! Value
  end,
   receive 
    {set, New_value} -> 
      handle_request(New_value)
  end.
\end{lstlisting}
\end{figure}
